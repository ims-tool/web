Tabelas:
- version: adicionar dois novos campos (system_user varchar2 (50), date_create datetime)

- formtype: 
   -- deixei os registros hardcode, pois se alterar alguma tipificação terá que ser ajustado no código de qualquer forma.
   -- Só adicionar as novas tipificaçõs só para ter o mapeamento

- Criar tabela flow.answer

CREATE TABLE flow.answer
(
  id bigint NOT NULL,
  name character varying(30),
  description character varying(256),
  nextform bigint,
  tag bigint,
  versionid bigint,
  CONSTRAINT pk_answer PRIMARY KEY (id),
  CONSTRAINT fk_answer_nextform FOREIGN KEY (nextform) REFERENCES flow.form (id) MATCH SIMPLE ON UPDATE NO ACTION ON DELETE NO ACTION,
  CONSTRAINT uk_answer_name UNIQUE (name)
)
WITH (
  OIDS=FALSE
);
ALTER TABLE flow.answer
  OWNER TO postgres;


- Criar tabela flow.return



CREATE TABLE flow.return
(
  id bigint NOT NULL,
  name character varying(30),
  description character varying(256),
  tag bigint,
  versionid bigint,
  CONSTRAINT pk_return PRIMARY KEY (id),
  CONSTRAINT uk_return_name UNIQUE (name)
)
WITH (
  OIDS=FALSE
);
ALTER TABLE flow.return
  OWNER TO postgres;

- Atualizar tabela decisionchance

drop table flow.decisionchance;

CREATE TABLE flow.decisionchance
(
  id bigint NOT NULL,
  decisionid bigint,
  ordernum bigint,
  condition bigint,
  nextformid bigint,
  tag bigint,
  versionid bigint,
  CONSTRAINT pk_decisionchance PRIMARY KEY (id),
  CONSTRAINT fk_decisionchance_nextform FOREIGN KEY (nextformid)
      REFERENCES flow.form (id) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION
)
WITH (
  OIDS=FALSE
);
ALTER TABLE flow.decisionchance
  OWNER TO postgres;

- Criar tabela flow.TransferRule

CREATE TABLE flow.transferrule 
(
	id bigint NOT NULL,
	ordernum int NOT NULL, 
	transferid bigint NOT NULL,
	condition bigint,
        tag bigint,
	prompt bigint,
	number bigint,
	versionid bigint,
  	CONSTRAINT pk_transferrule PRIMARY KEY (id),
  	CONSTRAINT fk_transferrule_transfer FOREIGN KEY (transferid)
      	REFERENCES flow.transfer (id) MATCH SIMPLE
      	ON UPDATE NO ACTION ON DELETE NO ACTION
)

- Adicionar colunas na tabela form

ALTER TABLE flow.form ADD COLUMN "positionx" character varying(10);

ALTER TABLE flow.form ADD COLUMN "positiony" character varying(10);

--Criar sequences

create sequence flow.seq_uid;

create sequence flow.seq_tag;

create sequence flow.seq_version start with 1000;

--criar indices

create index ix_conditionmap_method on flow.conditionmap(methodreference)

-- alterar colunas

alter table flow.conditionmap ALTER COLUMN "name" TYPE character varying(30)
alter table flow.conditionmap ALTER COLUMN description TYPE character varying(2000)
alter table flow.conditionmap ALTER COLUMN "type" TYPE character varying(10)
alter table flow.conditionmap ALTER COLUMN methodreference TYPE character varying(100)

-- inserir registros na tabela formtype


insert into flow.formtype (id,name) values('0','Answer');

insert into flow.formtype (id,name) values('12','NoMatchInput');

insert into flow.formtype (id,name) values('13','Choice');

insert into flow.formtype (id,name) values('14','DecisionChance');

insert into flow.formtype (id,name) values('15','Return');

insert into flow.formtype (id,name) values('16','NoMatch');

insert into flow.formtype (id,name) values('17','NoInput');
